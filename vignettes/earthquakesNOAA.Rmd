---
title: "earthquakesNOAA"
author: "Williams Ojo"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

The package 'earthquakeNOAA' has been built to clean and display the earthquake data from NOAA (The National Centers for Environmental
Information). The dataset can be found here: https://www.ngdc.noaa.gov/nndc/struts/form?t=101650&s=1&d=1

The Package is divided into 3 sections:

* Cleaning the Dataset
* Displaying the Earthquakes through the geom_timeline and geom_timeline_label functions.
* Displaying the Earthquakes by their geographical location, through leaflet.

These sections give you a comprehensive way to analyze and visualize the Earthquake data. 

## Cleaning the Dataset

The cleaning part of the package is composed using 2 functions:

`eq_clean_data` converts time information to Date class,
it converts the longitude and latitude information to numeric
and it applies the `eq_location_clean` function to LOCATION_NAME field.


```{r eq_read_example, message = FALSE}
filename <- system.file("NOAAearthquakes.txt", package = "earthquakesNOAA")
data <- readr::read_delim("NOAAearthquakes.txt", delim = "\t")
eq_clean_data(data)

```



## Leaflet Functions

The following 2 functions were built to display the earthquake data by their geographical location through a leaflet map.

### eq_map

`eq_map` is a function that displays the data points in the input `data` argument, based on its LATITUDE and LONGITUDE columns. The data points will be displayed as circles in the map. The second argument, `annot_col` decides which column in the dataset will be used as the pop-up annotation of the leaflet map.


**Note: Leaflet Maps may not display in some browsers. To visualize the results of the leaflet map functions (in vignettes), download the package and knit the vignette (or preview the html file) in RStudio.**
```{r eq_map_example, fig.width = 7, fig.height = 4}
data %>% 
  eq_clean_data() %>% 
  dplyr::filter(COUNTRY == "MEXICO" & lubridate::year(DATE) >= 2000) %>% 
  dplyr::mutate(popup_text = eq_create_label(.)) %>% 
  eq_map(annot_col = "popup_text")
```
```

